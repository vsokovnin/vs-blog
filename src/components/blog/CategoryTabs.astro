---
import { CATEGORIES } from '~/utils/categories';
import { getBlogPermalink, getPermalink } from '~/utils/permalinks';

interface Props {
  activeCategory?: string;
  class?: string;
}

const { activeCategory, class: className } = Astro.props;

const allPostsUrl = getBlogPermalink();
const isAllActive = !activeCategory;
---

<div class={`flex flex-wrap gap-3 mb-8 border-b border-gray-200 dark:border-gray-700 ${className || ''}`}>
  <a
    href={allPostsUrl}
    data-astro-reload
    class:list={[
      'px-4 py-3 text-sm font-medium transition-all duration-200 border-b-2 -mb-px',
      {
        'border-primary text-primary dark:text-primary': isAllActive,
        'border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600':
          !isAllActive,
      },
    ]}
  >
    Все статьи
  </a>
  {
    CATEGORIES.map((category) => {
      const isActive = activeCategory === category.slug;
      const categoryUrl = getPermalink(category.slug, 'category');

      return (
        <a
          href={categoryUrl}
          data-astro-reload
          class:list={[
            'px-4 py-3 text-sm font-medium transition-all duration-200 border-b-2 -mb-px whitespace-nowrap',
            {
              'border-primary text-primary dark:text-primary': isActive,
              'border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600':
                !isActive,
            },
          ]}
        >
          {category.name}
        </a>
      );
    })
  }
</div>
